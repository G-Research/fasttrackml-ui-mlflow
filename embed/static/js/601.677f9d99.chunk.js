"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[601],{94224:function(t,e,r){r.r(e),r.d(e,{ParallelCoordinatesPlot:function(){return f},default:function(){return h}});var n=r(78465),o=r(31742),i=r(35901),s=(r(62318),r(51150)),l=r(35453),u=r(15132);const a=(t,e,r)=>{var n;const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"g"),s=document.createElementNS(o,"rect"),l=document.createElementNS(o,"text");l.innerHTML=e,l.setAttribute("fill","black"),i.classList.add(t),i.appendChild(s),i.appendChild(l),null===(n=r.parentNode)||void 0===n||n.insertBefore(i,r.nextSibling);const u=l.getBBox();s.setAttribute("x",(u.x-4).toString()),s.setAttribute("y",(u.y-4).toString()),s.setAttribute("width",(u.width+8).toString()),s.setAttribute("height",(u.height+8).toString()),s.setAttribute("fill","white")},c=t=>{const{onHover:e,onUnhover:r,selectedRunUuid:o,data:c,axesRotateThreshold:d,selectedMetrics:f,selectedParams:h,width:p,height:g,closeContextMenu:m}=t,v=(0,n.useRef)(null),b=(0,n.useRef)(),[y,w]=(0,n.useState)("");(0,n.useEffect)((()=>{y?null===e||void 0===e||e(y):null===r||void 0===r||r()}),[y,e,r]);const S=(0,n.useCallback)((()=>!1!==b.current.brushed()?b.current.brushed():b.current.data()),[]);(0,n.useEffect)((()=>{if(!b.current)return;const t=S().filter((t=>[y,o].includes(t.uuid)));t.length?b.current.highlight(t):b.current.unhighlight()}),[y,o,S]);const x=(0,n.useCallback)((t=>{const e=[],r=S();if(0===r.length)return!1;const n=M();if(0===n.length)return!1;const o=E(t,n[0]);if(!o)return!1;const i=o;return n.forEach(((n,o)=>{C(n[i-1],n[i],t,2)&&e.push(r[o])})),[e]}),[S]),A=(0,n.useCallback)((t=>{const e=[];let r=0;const n=v.current;if(!n)return;n.querySelectorAll(".dimension").forEach((function(t){const n=t.getAttribute("transform");if(n){const o=parseFloat(n.split("(")[1].split(")")[0]);e.push(o);const{width:i}=t.getBBox();0===r&&(r=i)}}));const o=[];for(let u=0;u<e.length;u++)o.push(e[u]+r/2);let i=[];const s=x(t);let l="";if(s&&0!==s[0].length)if([i]=s,i.length>1&&(i=[i[1]]),o.some((e=>Math.abs(e-t.offsetX)<10)));else{l=i[0].uuid}w(l)}),[v,x]),M=()=>{const t=b.current.margin();return(b.current.brushed().length?b.current.brushed():b.current.data()).map((e=>b.current.compute_real_centroids(e).map((e=>[e[0]+t.left,e[1]+t.top]))))},E=(t,e)=>{const r=t.offsetX;if(e[0][0]>r)return!1;if(e[e.length-1][0]<r)return!1;for(let n=0;n<e.length;n++)if(e[n][0]>r)return n;return!1},C=(t,e,r,n)=>{const o=r.offsetX,i=r.offsetY,[s,l]=t,[u,a]=e,c=u-s,d=a-l;return Math.abs(d*o-c*i-s*a+u*l)/Math.sqrt(Math.pow(c,2)+Math.pow(d,2))<=n};return(0,n.useEffect)((()=>{if(null!==v){var t,e,r,n,o;const y=h.length+f.length,S=15,x=9,M=p/y*.8,E=p/y*.4,C=f[f.length-1],k=c.map((t=>t[C])),B=Math.min(...k.filter((t=>!isNaN(t)))),N=Math.max(...k.filter((t=>!isNaN(t)))),q=(0,s.BY)().domain([B,N]).range(["#3182bd","#f33"]),L=v.current;var u;if(L)null===(u=L.querySelector("#wrapper svg"))||void 0===u||u.remove();L&&L.querySelectorAll("canvas").forEach((t=>t.remove()));const R=()=>{const t=Object.keys(c[0]),e=t.map((t=>c.map((e=>e[t])).filter((t=>null!==t)))).map((t=>t.every((t=>!isNaN(t)))?"number":"string"));return Object.fromEntries(t.map(((r,n)=>[t[n],{type:e[n]}])))};if(b.current=(0,i.Z)()(v.current).width(p).height(g).data(c).dimensions(R()).alpha(.8).alphaOnBrushed(.2).hideAxis(["uuid"]).lineWidth(1).color((t=>t&&C in t&&"null"!==t[C]?q(t[C]):"#f33")).createAxes().render().reorderable().brushMode("1D-axes"),!L)return;b.current.on("brushend",(()=>{b.current.unhighlight(),m()})),null===(t=L.querySelector("#wrapper svg"))||void 0===t||t.addEventListener("mousemove",(function(t){const{offsetX:e,offsetY:r}=t;A({offsetX:e,offsetY:r})})),null===(e=L.querySelector("#wrapper svg"))||void 0===e||e.addEventListener("mouseout",(()=>{w("")})),L.querySelectorAll(".parcoords .label").forEach((t=>{const e=t.innerHTML;y>d&&t.setAttribute("transform","rotate(-30)"),t.setAttribute("y","-20"),t.setAttribute("x","20");t.getBoundingClientRect().width>M&&(t.innerHTML=(0,l.aS)(e,S),e!==t.innerHTML&&a("axis-label-tooltip",e,t))})),L.querySelectorAll(".parcoords .tick text").forEach((t=>{const e=t.innerHTML;t.getBoundingClientRect().width>E&&(t.innerHTML=(0,l.aS)(e,x),e!==t.innerHTML&&a("tick-label-tooltip",e,t))}));const T=b.current.svg.append("defs").append("linearGradient").attr("id","mygrad").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");T.append("stop").attr("offset","0%").style("stop-color","#f33").style("stop-opacity",1),T.append("stop").attr("offset","100%").style("stop-color","#3182bd").style("stop-opacity",1);const H=null===(r=v.current)||void 0===r||null===(n=r.querySelector("svg"))||void 0===n?void 0:n.getBoundingClientRect(),_=null===(o=v.current)||void 0===o?void 0:o.querySelector(".dimension:last-of-type");if(!_)return;const X=null===_||void 0===_?void 0:_.getBoundingClientRect(),Z=null===_||void 0===_?void 0:_.getAttribute("transform");if(!Z)return;const O=parseFloat(Z.split("(")[1].split(")")[0]);if(H){b.current.svg.append("rect").attr("x",O+20).attr("y",0).attr("width",20).attr("height",X.height-40).style("fill","url(#mygrad)")}}}),[c,p,g,h,f,e,d,A,v,m]),(0,u.tZ)("div",{ref:v,id:"wrapper",style:{width:t.width,height:t.height},className:"parcoords"})};var d={name:"v4me8z",styles:"overflow:hidden;flex:1;padding-top:20px;font-size:0"};const f=t=>{const e=(0,n.useRef)(null),{layoutHeight:r,layoutWidth:i,setContainerDiv:s}=(0,l.Ih)(),[a,f]=(0,n.useState)(!0),h=(0,n.useRef)();return(0,n.useEffect)((()=>{s(e.current)}),[s]),(0,n.useEffect)((()=>{f(!0),h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{f(!1)}),300)}),[r,i]),(0,u.tZ)("div",{ref:e,css:d,children:a?(0,u.tZ)(o.OdW,{}):(0,u.tZ)(c,{...t,width:i,height:r})})};var h=f}}]);